<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Короткая Таблица Менделеева</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --main-font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --size-sym: 28px;
            --size-nam: 14px;
            --size-mas: 12px;
        }

        body { font-family: var(--main-font); background: #fff; padding: 20px; color: #000; }

        /* Панель управления */
        .panel {
            background: #f0f2f5; padding: 20px; border-radius: 12px;
            display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 40px;
            border: 1px solid #ddd; align-items: center;
        }
        .ctrl { display: flex; flex-direction: column; gap: 5px; font-size: 12px; font-weight: bold; }
        input[type="range"] { width: 120px; }

        /* Сетка таблицы - 8 колонок */
        #table-capture {
            display: grid;
            grid-template-columns: repeat(8, 110px);
            gap: 25px 15px;
            background: white;
            padding: 30px;
            width: fit-content;
        }

        .cell {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Все по левому краю */
            text-align: left;
            line-height: 1.1;
        }

        .s { font-size: var(--size-sym); font-weight: bold; margin-bottom: 2px; }
        .n { font-size: var(--size-nam); }
        .m { font-size: var(--size-mas); opacity: 0.7; }

        .group-label {
            font-size: 18px; font-weight: bold; color: #ccc;
            margin-bottom: 10px; border-bottom: 1px solid #eee;
        }

        button.save {
            background: #2ecc71; color: white; border: none; padding: 12px 24px;
            border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: bold;
        }
        button.save:hover { background: #27ae60; }
    </style>
</head>
<body>

<div class="panel">
    <div class="ctrl">
        <label>1. Загрузи шрифт:</label>
        <input type="file" id="fontFile" accept=".ttf,.otf,.woff">
    </div>
    <div class="ctrl">
        Символ: <input type="range" min="10" max="80" value="28" oninput="upd('sym', this.value)">
    </div>
    <div class="ctrl">
        Название: <input type="range" min="8" max="40" value="14" oninput="upd('nam', this.value)">
    </div>
    <div class="ctrl">
        Масса: <input type="range" min="8" max="40" value="12" oninput="upd('mas', this.value)">
    </div>
    <button class="save" onclick="downloadJPG()">⬇ Скачать JPG</button>
</div>

<div id="table-capture">
    <div class="group-label">I</div><div class="group-label">II</div>
    <div class="group-label">III</div><div class="group-label">IV</div>
    <div class="group-label">V</div><div class="group-label">VI</div>
    <div class="group-label">VII</div><div class="group-label">VIII</div>
</div>

<script>
    // Настройки размеров
    const upd = (type, val) => document.documentElement.style.setProperty(`--size-${type}`, val + 'px');

    // Полная база элементов (названия на русском)
    // Формат: [Символ, Название, Масса, Группа(1-8)]
    const elements = [
        ["H", "водород", "1.008", 1], ["He", "гелий", "4.002", 8],
        ["Li", "литий", "6.94", 1], ["Be", "бериллий", "9.012", 2], ["B", "бор", "10.81", 3], ["C", "углерод", "12.01", 4], ["N", "азот", "14.00", 5], ["O", "кислород", "15.99", 6], ["F", "фтор", "18.99", 7], ["Ne", "неон", "20.18", 8],
        ["Na", "натрий", "22.99", 1], ["Mg", "магний", "24.30", 2], ["Al", "алюминий", "26.98", 3], ["Si", "кремний", "28.08", 4], ["P", "фосфор", "30.97", 5], ["S", "сера", "32.06", 6], ["Cl", "хлор", "35.45", 7], ["Ar", "аргон", "39.94", 8],
        ["K", "калий", "39.09", 1], ["Ca", "кальций", "40.07", 2], ["Sc", "скандий", "44.95", 3], ["Ti", "титан", "47.86", 4], ["V", "ванадий", "50.94", 5], ["Cr", "хром", "51.99", 6], ["Mn", "марганец", "54.93", 7], ["Fe", "железо", "55.84", 8], ["Co", "кобальт", "58.93", 8], ["Ni", "никель", "58.69", 8],
        ["Cu", "медь", "63.54", 1], ["Zn", "цинк", "65.38", 2], ["Ga", "галлий", "69.72", 3], ["Ge", "германий", "72.63", 4], ["As", "мышьяк", "74.92", 5], ["Se", "селен", "78.97", 6], ["Br", "бром", "79.90", 7], ["Kr", "криптон", "83.79", 8]
        // Список можно продолжать до 118 по тому же принципу
    ];

    const container = document.getElementById('table-capture');

    // Рендерим таблицу
    elements.forEach(el => {
        const div = document.createElement('div');
        div.className = 'cell';
        div.style.gridColumn = el[3]; // Устанавливаем в нужную колонку группы

        div.innerHTML = `
            <div class="s">${el[0]}</div>
            <div class="n">${el[1]}</div>
            <div class="m">${el[2]}</div>
        `;
        container.appendChild(div);
    });

    // Работа со шрифтом
    document.getElementById('fontFile').onchange = function(e) {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function(ev) {
            const font = new FontFace('CustomFont', ev.target.result);
            font.load().then(f => {
                document.fonts.add(f);
                document.body.style.fontFamily = 'CustomFont';
            });
        };
        reader.readAsArrayBuffer(file);
    };

    // Скачивание JPG
    function downloadJPG() {
        const area = document.getElementById('table-capture');
        html2canvas(area, { 
            scale: 2,
            backgroundColor: "#ffffff"
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'mendeleev-custom.jpg';
            link.href = canvas.toDataURL("image/jpeg", 0.9);
            link.click();
        });
    }
</script>

</body>
</html>
